{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Irfan/Downloads/OOM%20Mini%20project/lib/mongo.ts"],"sourcesContent":["import { MongoClient, Db } from 'mongodb'\r\n\r\nconst uri = process.env.MONGODB_URI || 'mongodb://localhost:27017/'\r\n\r\nlet client: MongoClient | null = null\r\nlet db: Db | null = null\r\n\r\nasync function connect() {\r\n  if (db) return db\r\n  if (!client) {\r\n    client = new MongoClient(uri)\r\n    await client.connect()\r\n  }\r\n  db = client.db('oom')\r\n  return db\r\n}\r\n\r\nexport async function createBookingMongo(booking: any) {\r\n  const database = await connect()\r\n  const res = await database.collection('bookings').insertOne({\r\n    ...booking,\r\n    created_at: new Date(),\r\n  })\r\n  const inserted = await database.collection('bookings').findOne({ _id: res.insertedId })\r\n  return inserted\r\n}\r\n\r\nexport async function getBookingsMongo(userId?: number) {\r\n  const database = await connect()\r\n  const q: any = {}\r\n  if (userId) q.user_id = userId\r\n  const items = await database.collection('bookings').find(q).sort({ created_at: -1 }).toArray()\r\n  return items\r\n}\r\n\r\nexport async function createPaymentMongo(payment: any) {\r\n  const database = await connect()\r\n  const res = await database.collection('payments').insertOne({\r\n    ...payment,\r\n    created_at: new Date(),\r\n  })\r\n  const inserted = await database.collection('payments').findOne({ _id: res.insertedId })\r\n  return inserted\r\n}\r\n\r\nexport async function getPaymentsMongo(userId?: number) {\r\n  const database = await connect()\r\n  const q: any = {}\r\n  if (userId) q.user_id = userId\r\n  const items = await database.collection('payments').find(q).sort({ created_at: -1 }).toArray()\r\n  return items\r\n}\r\n\r\nexport async function closeMongo() {\r\n  if (client) {\r\n    await client.close()\r\n    client = null\r\n    db = null\r\n  }\r\n}\r\n\r\nexport default { connect, createBookingMongo, getBookingsMongo, createPaymentMongo, getPaymentsMongo, closeMongo }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW,IAAI;AAEvC,IAAI,SAA6B;AACjC,IAAI,KAAgB;AAEpB,eAAe;IACb,IAAI,IAAI,OAAO;IACf,IAAI,CAAC,QAAQ;QACX,SAAS,IAAI,sHAAW,CAAC;QACzB,MAAM,OAAO,OAAO;IACtB;IACA,KAAK,OAAO,EAAE,CAAC;IACf,OAAO;AACT;AAEO,eAAe,mBAAmB,OAAY;IACnD,MAAM,WAAW,MAAM;IACvB,MAAM,MAAM,MAAM,SAAS,UAAU,CAAC,YAAY,SAAS,CAAC;QAC1D,GAAG,OAAO;QACV,YAAY,IAAI;IAClB;IACA,MAAM,WAAW,MAAM,SAAS,UAAU,CAAC,YAAY,OAAO,CAAC;QAAE,KAAK,IAAI,UAAU;IAAC;IACrF,OAAO;AACT;AAEO,eAAe,iBAAiB,MAAe;IACpD,MAAM,WAAW,MAAM;IACvB,MAAM,IAAS,CAAC;IAChB,IAAI,QAAQ,EAAE,OAAO,GAAG;IACxB,MAAM,QAAQ,MAAM,SAAS,UAAU,CAAC,YAAY,IAAI,CAAC,GAAG,IAAI,CAAC;QAAE,YAAY,CAAC;IAAE,GAAG,OAAO;IAC5F,OAAO;AACT;AAEO,eAAe,mBAAmB,OAAY;IACnD,MAAM,WAAW,MAAM;IACvB,MAAM,MAAM,MAAM,SAAS,UAAU,CAAC,YAAY,SAAS,CAAC;QAC1D,GAAG,OAAO;QACV,YAAY,IAAI;IAClB;IACA,MAAM,WAAW,MAAM,SAAS,UAAU,CAAC,YAAY,OAAO,CAAC;QAAE,KAAK,IAAI,UAAU;IAAC;IACrF,OAAO;AACT;AAEO,eAAe,iBAAiB,MAAe;IACpD,MAAM,WAAW,MAAM;IACvB,MAAM,IAAS,CAAC;IAChB,IAAI,QAAQ,EAAE,OAAO,GAAG;IACxB,MAAM,QAAQ,MAAM,SAAS,UAAU,CAAC,YAAY,IAAI,CAAC,GAAG,IAAI,CAAC;QAAE,YAAY,CAAC;IAAE,GAAG,OAAO;IAC5F,OAAO;AACT;AAEO,eAAe;IACpB,IAAI,QAAQ;QACV,MAAM,OAAO,KAAK;QAClB,SAAS;QACT,KAAK;IACP;AACF;uCAEe;IAAE;IAAS;IAAoB;IAAkB;IAAoB;IAAkB;AAAW"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Irfan/Downloads/OOM%20Mini%20project/app/bookings/%5Bid%5D/page.tsx"],"sourcesContent":["import { getBookingsMongo } from '@/lib/mongo'\r\n\r\nexport default async function BookingPage({ params }: { params: Promise<{ id: string }> }) {\r\n  try {\r\n    const { id } = await params\r\n    const bookingId = id\r\n    if (!bookingId) {\r\n      return (\r\n        <div className=\"p-6\">\r\n          <h2 className=\"text-xl font-semibold\">Invalid Booking ID</h2>\r\n          <p className=\"mt-2 text-sm\">No booking ID provided.</p>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    const bookings = await getBookingsMongo()\r\n    const booking = bookings.find(b => b._id?.toString() === bookingId)\r\n\r\n    if (!booking) {\r\n      return (\r\n        <div className=\"p-6\">\r\n          <h2 className=\"text-xl font-semibold\">Booking not found</h2>\r\n          <p className=\"mt-2 text-sm\">We couldn't find a booking with ID {bookingId}.</p>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold\">Booking Confirmed</h2>\r\n        <div className=\"mt-4 space-y-2\">\r\n          <div><strong>Booking ID:</strong> {booking._id?.toString()}</div>\r\n          <div><strong>User ID:</strong> {booking.user_id}</div>\r\n          <div><strong>Slot ID:</strong> {booking.slot_id}</div>\r\n          <div><strong>Start Time:</strong> {booking.start_time}</div>\r\n          <div><strong>Vehicle Number:</strong> {booking.vehicle_number}</div>\r\n          <div><strong>Total Amount:</strong> â‚¹{booking.total_amount}</div>\r\n          <div><strong>Created At:</strong> {booking.created_at?.toString()}</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  } catch (error) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold\">Error</h2>\r\n        <p className=\"mt-2 text-sm\">Failed to load booking details.</p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEe,eAAe,YAAY,EAAE,MAAM,EAAuC;IACvF,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,YAAY;QAClB,IAAI,CAAC,WAAW;YACd,qBACE,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,6WAAC;wBAAE,WAAU;kCAAe;;;;;;;;;;;;QAGlC;QAEA,MAAM,WAAW,MAAM,IAAA,gIAAgB;QACvC,MAAM,UAAU,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,EAAE,eAAe;QAEzD,IAAI,CAAC,SAAS;YACZ,qBACE,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,6WAAC;wBAAE,WAAU;;4BAAe;4BAAoC;4BAAU;;;;;;;;;;;;;QAGhF;QAEA,qBACE,6WAAC;YAAI,WAAU;;8BACb,6WAAC;oBAAG,WAAU;8BAAwB;;;;;;8BACtC,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;;8CAAI,6WAAC;8CAAO;;;;;;gCAAoB;gCAAE,QAAQ,GAAG,EAAE;;;;;;;sCAChD,6WAAC;;8CAAI,6WAAC;8CAAO;;;;;;gCAAiB;gCAAE,QAAQ,OAAO;;;;;;;sCAC/C,6WAAC;;8CAAI,6WAAC;8CAAO;;;;;;gCAAiB;gCAAE,QAAQ,OAAO;;;;;;;sCAC/C,6WAAC;;8CAAI,6WAAC;8CAAO;;;;;;gCAAoB;gCAAE,QAAQ,UAAU;;;;;;;sCACrD,6WAAC;;8CAAI,6WAAC;8CAAO;;;;;;gCAAwB;gCAAE,QAAQ,cAAc;;;;;;;sCAC7D,6WAAC;;8CAAI,6WAAC;8CAAO;;;;;;gCAAsB;gCAAG,QAAQ,YAAY;;;;;;;sCAC1D,6WAAC;;8CAAI,6WAAC;8CAAO;;;;;;gCAAoB;gCAAE,QAAQ,UAAU,EAAE;;;;;;;;;;;;;;;;;;;IAI/D,EAAE,OAAO,OAAO;QACd,qBACE,6WAAC;YAAI,WAAU;;8BACb,6WAAC;oBAAG,WAAU;8BAAwB;;;;;;8BACtC,6WAAC;oBAAE,WAAU;8BAAe;;;;;;;;;;;;IAGlC;AACF"}}]
}